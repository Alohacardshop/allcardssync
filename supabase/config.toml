
[project]
project_id = "dmpoandoydaqxhzdjnmk"

[api]
enabled = true
port = 54321
schemas = ["public", "graphql_public"]
extra_search_path = ["public", "extensions"]
max_rows = 1000

[db]
port = 54322

[studio]
enabled = true
port = 54323

[inbucket]
enabled = true
port = 54324

[storage]
enabled = true
port = 54325

[auth]
enabled = true
port = 54326

[functions]
verify_jwt = true

# Shopify sync processor (requires service role access)
[functions.shopify-sync-processor]
verify_jwt = false

# SHOPIFY FUNCTIONS: All require JWT + admin/staff role verification
[functions.shopify-delete-duplicates]
verify_jwt = true

[functions.shopify-locations]
verify_jwt = true

[functions.shopify-config-check]
verify_jwt = true

[functions.shopify-webhook-check]
verify_jwt = true

[functions.shopify-pull-products-by-tags]
verify_jwt = true

# Shopify webhook handler (public - validates HMAC signature)
[functions.shopify-webhook]
verify_jwt = false

# Shopify webhook test function (public - for development)
[functions.shopify-webhook-test]
verify_jwt = false

# Shopify webhook registration (public - verifies admin role internally)
[functions.shopify-webhook-register]
verify_jwt = false

[functions.v2-shopify-send]
verify_jwt = true

[functions.v2-shopify-send-graded]
verify_jwt = true

[functions.v2-shopify-send-raw]
verify_jwt = true

[functions.v2-batch-send-to-inventory]
verify_jwt = true

[functions.admin-relink-graded-by-cert]
verify_jwt = true

# JustTCG refresh variants (requires admin role)
[functions.justtcg-refresh-variants]
verify_jwt = true

# Shopify removal functions (public - called by database triggers)
[functions.v2-shopify-remove-graded]
verify_jwt = false

[functions.v2-shopify-remove-raw]
verify_jwt = false

# Zebra TCP communication (requires authentication)
[functions.zebra-tcp]
verify_jwt = true

# System settings functions (require admin role)
[functions.set-system-setting]
verify_jwt = true

[functions.get-system-setting]
verify_jwt = true

# Health monitoring (requires authentication)
[functions.health-monitor]
verify_jwt = true

# CGC certificate lookup (requires authentication)
[functions.cgc-lookup]
verify_jwt = true

# GCD comics search (requires authentication)
[functions.gcd-search]
verify_jwt = true

# Bulk location transfer (requires staff/admin role)
[functions.bulk-location-transfer]
verify_jwt = true

# Shopify inventory reconciliation (requires staff/admin role)
[functions.shopify-reconcile-inventory]
verify_jwt = true

# Shopify inventory import (requires staff/admin role)
[functions.shopify-import-inventory]
verify_jwt = true

# Admin and role management functions
[functions.bootstrap-admin]
verify_jwt = true

[functions.create-user-admin]
verify_jwt = true

[functions.reset-user-password]
verify_jwt = true

[functions.roles-admin]
verify_jwt = true

[functions.user-assignment-admin]
verify_jwt = true

[functions.get-decrypted-system-setting]
verify_jwt = true

# Catalog management functions
[functions.catalog-snapshots]
verify_jwt = true

[functions.catalog-sync-justtcg]
verify_jwt = true

[functions.daily-set-discovery]
verify_jwt = true

# PSA lookups
[functions.psa-lookup]
verify_jwt = true

# Shopify sync operations
[functions.shopify-sync]
verify_jwt = true

[functions.shopify-sync-dry-run]
verify_jwt = true

[functions.shopify-sync-cleanup]
verify_jwt = true

[functions.shopify-detect-conflicts]
verify_jwt = true

[functions.shopify-resolve-conflict]
verify_jwt = true

[functions.shopify-validate-sync]
verify_jwt = true

[functions.shopify-create-metafield-definitions]
verify_jwt = true

[functions.v2-shopify-reduce-raw]
verify_jwt = true
