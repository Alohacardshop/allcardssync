
[project]
project_id = "dmpoandoydaqxhzdjnmk"

[api]
enabled = true
port = 54321
schemas = ["public", "graphql_public"]
extra_search_path = ["public", "extensions"]
max_rows = 1000

[db]
port = 54322

[studio]
enabled = true
port = 54323

[inbucket]
enabled = true
port = 54324

[storage]
enabled = true
port = 54325

[auth]
enabled = true
port = 54326

[functions]
verify_jwt = true

# SHOPIFY FUNCTIONS: All require JWT + admin/staff role verification
[functions.shopify-delete-duplicates]
verify_jwt = true

[functions.shopify-locations]
verify_jwt = true

[functions.shopify-config-check]
verify_jwt = true

[functions.shopify-pull-products-by-tags]
verify_jwt = true

# Shopify webhook handler (public - validates HMAC signature)
[functions.shopify-webhook]
verify_jwt = false

[functions.shopify-webhook-check]
verify_jwt = true

[functions.shopify-webhook-register]
verify_jwt = true

# Shopify integration test endpoint (requires authentication)
[functions.shopify-test-webhook]
verify_jwt = true

[functions.v2-shopify-send]
verify_jwt = true

[functions.v2-shopify-send-graded]
verify_jwt = true

[functions.v2-shopify-send-raw]
verify_jwt = true

[functions.admin-relink-graded-by-cert]
verify_jwt = true

# JustTCG refresh variants (requires admin role)
[functions.justtcg-refresh-variants]
verify_jwt = true

# Shopify removal functions (public - called by database triggers)
[functions.v2-shopify-remove-graded]
verify_jwt = false

[functions.v2-shopify-remove-raw]
verify_jwt = false

# Bulk location transfer (requires staff/admin role)
[functions.bulk-location-transfer]
verify_jwt = true

# Shopify inventory reconciliation (requires staff/admin role)
[functions.shopify-reconcile-inventory]
verify_jwt = true

# Shopify sold items reconciliation - syncs actual inventory from Shopify (requires staff/admin role)
[functions.shopify-reconcile-sold-items]
verify_jwt = true

# Shopify inventory import (requires staff/admin role)
[functions.shopify-import-inventory]
verify_jwt = true

# Admin and role management functions
[functions.bootstrap-admin]
verify_jwt = true

[functions.create-user-admin]
verify_jwt = true

[functions.roles-admin]
verify_jwt = true

[functions.user-assignment-admin]
verify_jwt = true

# Catalog management functions
[functions.catalog-sync-justtcg]
verify_jwt = true

# PSA lookups
[functions.psa-lookup]
verify_jwt = true

# Shopify sync operations
[functions.shopify-sync]
verify_jwt = true

[functions.shopify-detect-conflicts]
verify_jwt = true

[functions.shopify-resolve-conflict]
verify_jwt = true

[functions.shopify-validate-sync]
verify_jwt = true

[functions.shopify-create-metafield-definitions]
verify_jwt = true

[functions.v2-shopify-reduce-raw]
verify_jwt = true

[functions.shopify-resync-inventory]
verify_jwt = true

# Discord notification functions
[functions.discord-test]
verify_jwt = true

[functions.shopify-webhook-discord]
verify_jwt = false

[functions.flush-pending-notifications]
verify_jwt = false
